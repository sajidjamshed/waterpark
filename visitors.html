<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WonderPark - Visitors Management</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
    <!-- ApexCharts for graphs -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/apexcharts@3.35.0/dist/apexcharts.css">
    <!-- Date Range Picker -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <style>
        :root {
            --sky-blue: #4fc3f7;
            --primary-blue: #0288d1;
            --dark-blue: #01579b;
            --light-bg: #e3f2fd;
            --sidebar-width: 260px;
            --success-green: #28a745;
            --warning-orange: #ffc107;
            --danger-red: #dc3545;
            --purple: #6f42c1;
            --teal: #20c997;
            --pink: #e83e8c;
            --indigo: #6610f2;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f8f9fa;
            overflow-x: hidden;
        }
        
        /* Sidebar Styles */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: var(--sidebar-width);
            background: linear-gradient(180deg, var(--dark-blue) 0%, var(--primary-blue) 100%);
            color: white;
            padding: 0;
            z-index: 1000;
            box-shadow: 3px 0 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }
        
        .sidebar-header {
            padding: 25px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .park-logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
        }
        
        .park-logo span {
            color: var(--sky-blue);
        }
        
        .sidebar-menu {
            padding: 20px 0;
            height: calc(100vh - 120px);
            overflow-y: auto;
        }
        
        .nav-item {
            margin-bottom: 5px;
        }
        
        .nav-link {
            color: rgba(255, 255, 255, 0.8);
            padding: 15px 25px;
            display: flex;
            align-items: center;
            transition: all 0.3s;
            border-left: 4px solid transparent;
        }
        
        .nav-link:hover, .nav-link.active {
            color: white;
            background: rgba(255, 255, 255, 0.1);
            border-left: 4px solid var(--sky-blue);
        }
        
        .nav-link i {
            width: 25px;
            margin-right: 12px;
            font-size: 1.2rem;
        }
        
        /* Main Content Styles */
        .main-content {
            margin-left: var(--sidebar-width);
            padding: 20px;
            transition: all 0.3s;
        }
        
        .topbar {
            background: white;
            border-radius: 12px;
            padding: 15px 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .search-box {
            position: relative;
            width: 300px;
        }
        
        .search-box input {
            width: 100%;
            padding: 10px 15px 10px 45px;
            border-radius: 8px;
            border: 1px solid #ddd;
            background: var(--light-bg);
        }
        
        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary-blue);
        }
        
        .user-info {
            display: flex;
            align-items: center;
        }
        
        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--sky-blue), var(--primary-blue));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            margin-right: 15px;
        }
        
        .notifications {
            position: relative;
            margin-right: 25px;
            cursor: pointer;
        }
        
        .notification-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ff4757;
            color: white;
            font-size: 0.7rem;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Page Header */
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .page-title h1 {
            color: var(--dark-blue);
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .page-title p {
            color: #666;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
        }
        
        .btn-primary-custom {
            background: var(--primary-blue);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .btn-primary-custom:hover {
            background: var(--dark-blue);
            color: white;
            transform: translateY(-2px);
        }
        
        /* Stats Cards */
        .stats-container {
            margin-bottom: 30px;
        }
        
        .stats-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            height: 100%;
            transition: transform 0.3s;
        }
        
        .stats-card:hover {
            transform: translateY(-5px);
        }
        
        .stats-icon {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            margin-right: 15px;
        }
        
        .stats-icon.blue {
            background: rgba(79, 195, 247, 0.1);
            color: var(--primary-blue);
        }
        
        .stats-icon.green {
            background: rgba(40, 167, 69, 0.1);
            color: var(--success-green);
        }
        
        .stats-icon.orange {
            background: rgba(255, 193, 7, 0.1);
            color: var(--warning-orange);
        }
        
        .stats-icon.red {
            background: rgba(220, 53, 69, 0.1);
            color: var(--danger-red);
        }
        
        .stats-icon.purple {
            background: rgba(111, 66, 193, 0.1);
            color: var(--purple);
        }
        
        .stats-icon.teal {
            background: rgba(32, 201, 151, 0.1);
            color: var(--teal);
        }
        
        .stats-icon.pink {
            background: rgba(232, 62, 140, 0.1);
            color: var(--pink);
        }
        
        .stats-info h3 {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .stats-info p {
            color: #666;
            font-size: 0.9rem;
            margin: 0;
        }
        
        /* Visitor Filter Section */
        .visitor-filter {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        
        .filter-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .filter-title {
            color: var(--dark-blue);
            font-weight: 600;
            font-size: 1.2rem;
        }
        
        .filter-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 15px;
        }
        
        .filter-group {
            flex: 1;
            min-width: 200px;
        }
        
        .filter-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark-blue);
        }
        
        .filter-control {
            width: 100%;
            padding: 10px 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
            background: white;
            font-family: 'Poppins', sans-serif;
        }
        
        .filter-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 10px;
        }
        
        .btn-filter {
            padding: 10px 25px;
            border-radius: 8px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-apply {
            background: var(--primary-blue);
            color: white;
        }
        
        .btn-reset {
            background: #f8f9fa;
            color: #666;
            border: 1px solid #ddd;
        }
        
        /* Visitors Table */
        .visitors-section {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .section-title {
            color: var(--dark-blue);
            font-weight: 600;
            font-size: 1.3rem;
        }
        
        .table-responsive {
            overflow-x: auto;
        }
        
        .visitors-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .visitors-table thead {
            background: var(--light-bg);
        }
        
        .visitors-table th {
            padding: 15px;
            text-align: left;
            color: var(--dark-blue);
            font-weight: 600;
            border-bottom: 2px solid #dee2e6;
        }
        
        .visitors-table td {
            padding: 15px;
            border-bottom: 1px solid #eee;
            vertical-align: middle;
        }
        
        .visitors-table tbody tr:hover {
            background: #f8f9fa;
        }
        
        /* Visitor Status Badges */
        .status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            display: inline-block;
        }
        
        .status-inside {
            background: rgba(40, 167, 69, 0.1);
            color: var(--success-green);
        }
        
        .status-exited {
            background: rgba(108, 117, 125, 0.1);
            color: #6c757d;
        }
        
        .status-vip {
            background: rgba(111, 66, 193, 0.1);
            color: var(--purple);
        }
        
        .status-member {
            background: rgba(32, 201, 151, 0.1);
            color: var(--teal);
        }
        
        /* Visitor Type */
        .visitor-type {
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .type-adult {
            background: #e3f2fd;
            color: #1976d2;
        }
        
        .type-child {
            background: #f3e5f5;
            color: #7b1fa2;
        }
        
        .type-senior {
            background: #e8f5e8;
            color: #388e3c;
        }
        
        .type-student {
            background: #fff3e0;
            color: #f57c00;
        }
        
        /* Group Size */
        .group-size {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .group-icon {
            color: var(--primary-blue);
        }
        
        /* Action Buttons */
        .action-buttons-cell {
            display: flex;
            gap: 8px;
        }
        
        .action-btn {
            width: 35px;
            height: 35px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .action-view {
            background: rgba(79, 195, 247, 0.1);
            color: var(--primary-blue);
        }
        
        .action-edit {
            background: rgba(255, 193, 7, 0.1);
            color: var(--warning-orange);
        }
        
        .action-delete {
            background: rgba(220, 53, 69, 0.1);
            color: var(--danger-red);
        }
        
        .action-btn:hover {
            transform: scale(1.1);
        }
        
        /* Visitor Demographics */
        .demographics-section {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }
        
        /* Charts Section */
        .charts-section {
            margin-bottom: 30px;
        }
        
        .chart-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            height: 100%;
        }
        
        .chart-title {
            color: var(--dark-blue);
            font-weight: 600;
            margin-bottom: 20px;
            font-size: 1.2rem;
        }
        
        /* Visitor Map */
        .visitor-map {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }
        
        .map-container {
            height: 400px;
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-radius: 8px;
            position: relative;
            overflow: hidden;
        }
        
        .map-visitor {
            position: absolute;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .visitor-adult {
            background: #1976d2;
        }
        
        .visitor-child {
            background: #7b1fa2;
        }
        
        .visitor-senior {
            background: #388e3c;
        }
        
        .visitor-student {
            background: #f57c00;
        }
        
        /* Visitor Feedback */
        .feedback-section {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }
        
        .feedback-item {
            display: flex;
            padding: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .feedback-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--light-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-blue);
            font-size: 1.2rem;
            font-weight: 600;
            margin-right: 15px;
        }
        
        .feedback-content {
            flex: 1;
        }
        
        .feedback-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .feedback-name {
            font-weight: 600;
            color: var(--dark-blue);
        }
        
        .feedback-rating {
            color: #ffc107;
        }
        
        .feedback-text {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        
        .feedback-time {
            color: #999;
            font-size: 0.85rem;
        }
        
        /* Pagination */
        .pagination-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .pagination-info {
            color: #666;
            font-size: 0.9rem;
        }
        
        .pagination {
            display: flex;
            gap: 5px;
        }
        
        .page-link {
            padding: 8px 15px;
            border-radius: 6px;
            border: 1px solid #ddd;
            background: white;
            color: var(--dark-blue);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .page-link:hover, .page-link.active {
            background: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .sidebar {
                width: 70px;
                overflow: hidden;
            }
            
            .sidebar:hover {
                width: var(--sidebar-width);
            }
            
            .sidebar .nav-link span {
                opacity: 0;
            }
            
            .sidebar:hover .nav-link span {
                opacity: 1;
            }
            
            .main-content {
                margin-left: 70px;
            }
            
            .sidebar-header .logo-text {
                display: none;
            }
            
            .sidebar:hover .logo-text {
                display: block;
            }
            
            .filter-row {
                flex-direction: column;
            }
            
            .filter-group {
                min-width: 100%;
            }
        }
        
        @media (max-width: 768px) {
            .main-content {
                margin-left: 0;
                padding: 15px;
            }
            
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.mobile-open {
                transform: translateX(0);
            }
            
            .topbar {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .search-box {
                width: 100%;
                margin-bottom: 15px;
            }
            
            .page-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .action-buttons {
                width: 100%;
                justify-content: flex-start;
            }
            
            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .action-buttons-cell {
                flex-direction: column;
            }
        }
        
        /* Mobile menu button */
        .mobile-menu-btn {
            display: none;
            background: var(--primary-blue);
            color: white;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 8px;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            margin-right: 15px;
        }
        
        @media (max-width: 768px) {
            .mobile-menu-btn {
                display: flex;
            }
        }
        
        /* Modal Styles */
        .visitor-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .visitor-modal-content {
            background: white;
            border-radius: 12px;
            width: 100%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #666;
            cursor: pointer;
        }
        
        .visitor-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .detail-item {
            margin-bottom: 15px;
        }
        
        .detail-label {
            font-weight: 600;
            color: var(--dark-blue);
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .detail-value {
            color: #333;
            font-size: 1rem;
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
      <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <a href="#" class="park-logo">
                <i class="fas fa-ferris-wheel me-2"></i>
                <span class="logo-text">Wonder<span>Park</span></span>
            </a>
        </div>
        
        <div class="sidebar-menu">
            <ul class="nav flex-column">
                <li class="nav-item">
                    <a class="nav-link active" href="#">
                        <i class="fas fa-home"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="ticketsales.html">
                        <i class="fas fa-ticket-alt"></i>
                        <span>Ticket Sales</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="visitors.html">
                        <i class="fas fa-users"></i>
                        <span>Visitors</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="ridesactivities.html">
                        <i class="fas fa-robot"></i>
                        <span>Rides & Activities</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="terminals.html">
                        <i class="fas fa-terminal"></i>
                        <span>Terminals</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="analytics.html">
                        <i class="fas fa-chart-line"></i>
                        <span>Analytics</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="users.html">
                        <i class="fas fa-cog"></i>
                        <span>Users</span>
                    </a>
                </li>
                <li class="nav-item mt-4">
                    <a class="nav-link" href="login.html">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Logout</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Top Bar -->
        <div class="topbar">
            <div class="d-flex align-items-center">
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search visitors, groups, tickets...">
                </div>
            </div>
            
            <div class="user-info">
                <div class="notifications">
                    <i class="fas fa-bell fa-lg" style="color: var(--primary-blue);"></i>
                    <span class="notification-badge">8</span>
                </div>
                <div class="user-avatar">AS</div>
                <div>
                    <h6 class="mb-0">Admin Saleem</h6>
                    <p class="text-muted mb-0" style="font-size: 0.85rem;">Park Manager</p>
                </div>
            </div>
        </div>
        
        <!-- Page Header -->
        <div class="page-header">
            <div class="page-title">
                <h1><i class="fas fa-users me-2"></i>Visitors Management</h1>
                <p>Monitor, manage, and analyze visitor data and behavior</p>
            </div>
            <div class="action-buttons">
                <button class="btn-primary-custom" onclick="exportVisitorData()">
                    <i class="fas fa-file-export"></i> Export Data
                </button>
                <button class="btn-primary-custom" onclick="addVisitor()">
                    <i class="fas fa-user-plus"></i> Add Visitor
                </button>
            </div>
        </div>
        
        <!-- Stats Overview -->
        <div class="row stats-container">
            <div class="col-xl-2 col-md-4 col-sm-6">
                <div class="stats-card">
                    <div class="stats-icon blue">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stats-info">
                        <h3 id="totalVisitors">3,891</h3>
                        <p>Total Visitors Today</p>
                    </div>
                </div>
            </div>
            <div class="col-xl-2 col-md-4 col-sm-6">
                <div class="stats-card">
                    <div class="stats-icon green">
                        <i class="fas fa-sign-in-alt"></i>
                    </div>
                    <div class="stats-info">
                        <h3 id="currentVisitors">2,457</h3>
                        <p>Currently Inside</p>
                    </div>
                </div>
            </div>
            <div class="col-xl-2 col-md-4 col-sm-6">
                <div class="stats-card">
                    <div class="stats-icon orange">
                        <i class="fas fa-child"></i>
                    </div>
                    <div class="stats-info">
                        <h3 id="childVisitors">1,248</h3>
                        <p>Children (Under 12)</p>
                    </div>
                </div>
            </div>
            <div class="col-xl-2 col-md-4 col-sm-6">
                <div class="stats-card">
                    <div class="stats-icon purple">
                        <i class="fas fa-crown"></i>
                    </div>
                    <div class="stats-info">
                        <h3 id="vipVisitors">89</h3>
                        <p>VIP Visitors</p>
                    </div>
                </div>
            </div>
            <div class="col-xl-2 col-md-4 col-sm-6">
                <div class="stats-card">
                    <div class="stats-icon teal">
                        <i class="fas fa-home"></i>
                    </div>
                    <div class="stats-info">
                        <h3 id="groupVisitors">42</h3>
                        <p>Groups Today</p>
                    </div>
                </div>
            </div>
            <div class="col-xl-2 col-md-4 col-sm-6">
                <div class="stats-card">
                    <div class="stats-icon pink">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="stats-info">
                        <h3 id="avgRating">4.6</h3>
                        <p>Avg. Satisfaction</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Visitor Filter Section -->
        <div class="visitor-filter">
            <div class="filter-header">
                <h3 class="filter-title"><i class="fas fa-filter me-2"></i>Filter Visitors</h3>
                <button class="btn btn-sm btn-outline-primary" onclick="advancedSearch()">
                    <i class="fas fa-search-plus me-1"></i>Advanced Search
                </button>
            </div>
            
            <div class="filter-row">
                <div class="filter-group">
                    <label class="filter-label" for="dateRange">Date Range</label>
                    <input type="text" class="filter-control" id="dateRange" placeholder="Select date range">
                </div>
                <div class="filter-group">
                    <label class="filter-label" for="visitorStatus">Visitor Status</label>
                    <select class="filter-control" id="visitorStatus">
                        <option value="all">All Status</option>
                        <option value="inside">Currently Inside</option>
                        <option value="exited">Exited</option>
                        <option value="vip">VIP Visitors</option>
                        <option value="member">Members</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label" for="visitorType">Visitor Type</label>
                    <select class="filter-control" id="visitorType">
                        <option value="all">All Types</option>
                        <option value="adult">Adult</option>
                        <option value="child">Child</option>
                        <option value="senior">Senior</option>
                        <option value="student">Student</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label" for="ticketType">Ticket Type</label>
                    <select class="filter-control" id="ticketType">
                        <option value="all">All Tickets</option>
                        <option value="single">Single Day</option>
                        <option value="family">Family Package</option>
                        <option value="group">Group Ticket</option>
                        <option value="season">Season Pass</option>
                        <option value="vip">VIP Pass</option>
                    </select>
                </div>
            </div>
            
            <div class="filter-actions">
                <button class="btn-filter btn-reset" onclick="resetVisitorFilters()">
                    <i class="fas fa-redo"></i> Reset
                </button>
                <button class="btn-filter btn-apply" onclick="applyVisitorFilters()">
                    <i class="fas fa-check"></i> Apply Filters
                </button>
            </div>
        </div>
        
        <!-- Visitor Map -->
        <div class="visitor-map">
            <div class="section-header">
                <h3 class="section-title"><i class="fas fa-map-marked-alt me-2"></i>Visitor Heat Map</h3>
                <div class="map-legend">
                    <span class="me-3"><i class="fas fa-circle" style="color: #1976d2;"></i> Adult</span>
                    <span class="me-3"><i class="fas fa-circle" style="color: #7b1fa2;"></i> Child</span>
                    <span class="me-3"><i class="fas fa-circle" style="color: #388e3c;"></i> Senior</span>
                    <span><i class="fas fa-circle" style="color: #f57c00;"></i> Student</span>
                </div>
            </div>
            <div class="map-container" id="visitorMap">
                <!-- Visitor markers will be added by JavaScript -->
            </div>
        </div>
        
        <!-- Visitors Table -->
        <div class="visitors-section">
            <div class="section-header">
                <h3 class="section-title"><i class="fas fa-list me-2"></i>Recent Visitors</h3>
                <div class="export-options">
                    <button class="btn btn-sm btn-outline-primary" onclick="printVisitorList()">
                        <i class="fas fa-print me-1"></i>Print
                    </button>
                </div>
            </div>
            
            <div class="table-responsive">
                <table class="visitors-table">
                    <thead>
                        <tr>
                            <th>Visitor ID</th>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Entry Time</th>
                            <th>Exit Time</th>
                            <th>Group Size</th>
                            <th>Ticket Type</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="visitorsTableBody">
                        <!-- Visitor data will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
            
            <!-- Pagination -->
            <div class="pagination-container">
                <div class="pagination-info">
                    Showing <span id="startRow">1</span> to <span id="endRow">10</span> of <span id="totalRows">50</span> entries
                </div>
                <div class="pagination" id="pagination">
                    <!-- Pagination will be generated by JavaScript -->
                </div>
            </div>
        </div>
        
        <!-- Charts Section -->
        <div class="row charts-section">
            <div class="col-lg-6">
                <div class="chart-card">
                    <h5 class="chart-title"><i class="fas fa-chart-bar me-2"></i>Visitor Demographics</h5>
                    <div id="demographicsChart" style="height: 300px;"></div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="chart-card">
                    <h5 class="chart-title"><i class="fas fa-chart-line me-2"></i>Hourly Visitor Flow</h5>
                    <div id="hourlyFlowChart" style="height: 300px;"></div>
                </div>
            </div>
        </div>
        
        <!-- Visitor Feedback -->
        <div class="feedback-section">
            <div class="section-header">
                <h3 class="section-title"><i class="fas fa-comment-alt me-2"></i>Recent Visitor Feedback</h3>
                <button class="btn btn-sm btn-outline-primary" onclick="viewAllFeedback()">
                    <i class="fas fa-eye me-1"></i>View All
                </button>
            </div>
            
            <div id="feedbackList">
                <!-- Feedback items will be populated by JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- Visitor Details Modal -->
    <div class="visitor-modal" id="visitorModal">
        <div class="visitor-modal-content">
            <button class="close-modal" onclick="closeVisitorModal()">&times;</button>
            <h3 class="mb-4" id="modalTitle">Visitor Details</h3>
            
            <div class="visitor-details" id="visitorDetails">
                <!-- Visitor details will be populated by JavaScript -->
            </div>
            
            <div class="d-flex justify-content-end gap-3 mt-4">
                <button type="button" class="btn btn-secondary" onclick="closeVisitorModal()">Close</button>
                <button type="button" class="btn btn-primary" onclick="editVisitor()">Edit Visitor</button>
            </div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.35.0/dist/apexcharts.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <script>
        // Sample visitor data
        const visitorsData = [
            { id: "V-2025-001", name: "Ahmed Raza", type: "adult", age: 35, gender: "Male", entryTime: "09:15 AM", exitTime: "05:45 PM", groupSize: 4, ticketType: "Family Package", status: "exited", phone: "+92 300 1234567", email: "ahmed.raza@email.com", nationality: "Pakistani", terminal: "Main Gate #1", spent: "PKR 8,500", rides: 12, rating: 5 },
            { id: "V-2025-002", name: "Sara Khan", type: "adult", age: 28, gender: "Female", entryTime: "10:30 AM", exitTime: "-", groupSize: 2, ticketType: "VIP Pass", status: "inside", phone: "+92 321 9876543", email: "sara.khan@email.com", nationality: "Pakistani", terminal: "VIP Lounge", spent: "PKR 15,000", rides: 8, rating: 4 },
            { id: "V-2025-003", name: "Ali Hassan", type: "child", age: 8, gender: "Male", entryTime: "11:45 AM", exitTime: "-", groupSize: 6, ticketType: "Group Ticket", status: "inside", phone: "N/A", email: "N/A", nationality: "Pakistani", terminal: "West Gate #2", spent: "PKR 2,500", rides: 6, rating: 5 },
            { id: "V-2025-004", name: "Fatima Noor", type: "senior", age: 65, gender: "Female", entryTime: "10:00 AM", exitTime: "03:30 PM", groupSize: 1, ticketType: "Senior Pass", status: "exited", phone: "+92 333 4567890", email: "fatima.noor@email.com", nationality: "Pakistani", terminal: "Main Gate #1", spent: "PKR 3,200", rides: 4, rating: 4 },
            { id: "V-2025-005", name: "Bilal Ahmed", type: "student", age: 22, gender: "Male", entryTime: "12:15 PM", exitTime: "-", groupSize: 3, ticketType: "Student Pass", status: "inside", phone: "+92 300 5551234", email: "bilal.ahmed@email.com", nationality: "Pakistani", terminal: "East Gate", spent: "PKR 4,800", rides: 10, rating: 4 },
            { id: "V-2025-006", name: "Zainab Malik", type: "adult", age: 32, gender: "Female", entryTime: "09:45 AM", exitTime: "06:30 PM", groupSize: 5, ticketType: "Family Package", status: "exited", phone: "+92 321 7778888", email: "zainab.malik@email.com", nationality: "Pakistani", terminal: "Main Gate #1", spent: "PKR 12,500", rides: 15, rating: 5 },
            { id: "V-2025-007", name: "Omar Farooq", type: "child", age: 10, gender: "Male", entryTime: "11:00 AM", exitTime: "-", groupSize: 4, ticketType: "Single Day", status: "inside", phone: "N/A", email: "N/A", nationality: "Pakistani", terminal: "Ride Zone", spent: "PKR 3,000", rides: 7, rating: 4 },
            { id: "V-2025-008", name: "Ayesha Siddiqui", type: "adult", age: 40, gender: "Female", entryTime: "10:20 AM", exitTime: "04:45 PM", groupSize: 2, ticketType: "VIP Pass", status: "exited", phone: "+92 300 9990000", email: "ayesha.siddiqui@email.com", nationality: "Pakistani", terminal: "VIP Lounge", spent: "PKR 18,000", rides: 9, rating: 5 },
            { id: "V-2025-009", name: "Kamran Ali", type: "senior", age: 70, gender: "Male", entryTime: "11:30 AM", exitTime: "-", groupSize: 1, ticketType: "Senior Pass", status: "inside", phone: "+92 333 2221111", email: "kamran.ali@email.com", nationality: "Pakistani", terminal: "Main Gate #1", spent: "PKR 2,800", rides: 3, rating: 3 },
            { id: "V-2025-010", name: "Hina Javed", type: "student", age: 24, gender: "Female", entryTime: "12:45 PM", exitTime: "-", groupSize: 4, ticketType: "Group Ticket", status: "inside", phone: "+92 321 4445555", email: "hina.javed@email.com", nationality: "Pakistani", terminal: "West Gate #2", spent: "PKR 6,500", rides: 11, rating: 4 }
        ];

        // Sample feedback data
        const feedbackData = [
            { id: 1, name: "Ahmed Raza", rating: 5, comment: "Amazing experience! The rides were thrilling and the staff was very helpful. Will definitely visit again!", time: "2 hours ago", avatar: "AR" },
            { id: 2, name: "Sara Khan", rating: 4, comment: "Great park overall. The VIP package was worth it. Food could be improved though.", time: "3 hours ago", avatar: "SK" },
            { id: 3, name: "Family Group", rating: 5, comment: "Perfect day out for the whole family. Kids loved the water rides. Clean and well-maintained park.", time: "4 hours ago", avatar: "FG" },
            { id: 4, name: "Zainab Malik", rating: 5, comment: "Best amusement park in the city! The new roller coaster is incredible. Safety measures are excellent.", time: "5 hours ago", avatar: "ZM" },
            { id: 5, name: "Student Group", rating: 4, comment: "Had a blast with friends. Student discount made it affordable. Waiting times were reasonable.", time: "6 hours ago", avatar: "SG" }
        ];

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile menu toggle
            document.getElementById('mobileMenuBtn').addEventListener('click', function() {
                document.getElementById('sidebar').classList.toggle('mobile-open');
            });

            // Initialize date range picker
            $('#dateRange').daterangepicker({
                opens: 'left',
                startDate: moment().startOf('day'),
                endDate: moment().endOf('day'),
                locale: {
                    format: 'MMM DD, YYYY'
                }
            });

            // Populate visitors table
            populateVisitorsTable();

            // Populate feedback list
            populateFeedbackList();

            // Create visitor map
            createVisitorMap();

            // Initialize charts
            initializeCharts();

            // Update stats in real-time
            setInterval(updateStats, 10000);
            setInterval(updateVisitorPositions, 15000);
        });

        // Populate visitors table
        function populateVisitorsTable() {
            const tableBody = document.getElementById('visitorsTableBody');
            tableBody.innerHTML = '';

            visitorsData.forEach(visitor => {
                const row = document.createElement('tr');
                
                // Determine status badge
                let statusClass = '';
                let statusText = '';
                switch(visitor.status) {
                    case 'inside': 
                        statusClass = 'status-inside';
                        statusText = 'Inside Park';
                        break;
                    case 'exited': 
                        statusClass = 'status-exited';
                        statusText = 'Exited';
                        break;
                    case 'vip': 
                        statusClass = 'status-vip';
                        statusText = 'VIP';
                        break;
                    case 'member': 
                        statusClass = 'status-member';
                        statusText = 'Member';
                        break;
                }
                
                // Determine type badge
                let typeClass = '';
                let typeText = '';
                switch(visitor.type) {
                    case 'adult': 
                        typeClass = 'type-adult';
                        typeText = 'Adult';
                        break;
                    case 'child': 
                        typeClass = 'type-child';
                        typeText = 'Child';
                        break;
                    case 'senior': 
                        typeClass = 'type-senior';
                        typeText = 'Senior';
                        break;
                    case 'student': 
                        typeClass = 'type-student';
                        typeText = 'Student';
                        break;
                }
                
                // Group size display
                const groupSizeHTML = `
                    <div class="group-size">
                        <i class="fas fa-users group-icon"></i>
                        <span>${visitor.groupSize}</span>
                    </div>
                `;

                row.innerHTML = `
                    <td><span class="visitor-id">${visitor.id}</span></td>
                    <td><strong>${visitor.name}</strong></td>
                    <td><span class="visitor-type ${typeClass}">${typeText}</span></td>
                    <td>${visitor.entryTime}</td>
                    <td>${visitor.exitTime}</td>
                    <td>${groupSizeHTML}</td>
                    <td>${visitor.ticketType}</td>
                    <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                    <td>
                        <div class="action-buttons-cell">
                            <button class="action-btn action-view" onclick="viewVisitorDetails('${visitor.id}')" title="View Details">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="action-btn action-edit" onclick="editVisitorDetails('${visitor.id}')" title="Edit">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn action-delete" onclick="deleteVisitor('${visitor.id}')" title="Delete">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Populate feedback list
        function populateFeedbackList() {
            const feedbackList = document.getElementById('feedbackList');
            feedbackList.innerHTML = '';

            feedbackData.forEach(feedback => {
                const feedbackItem = document.createElement('div');
                feedbackItem.className = 'feedback-item';
                
                // Create rating stars
                let starsHTML = '';
                for (let i = 1; i <= 5; i++) {
                    if (i <= feedback.rating) {
                        starsHTML += '<i class="fas fa-star"></i>';
                    } else {
                        starsHTML += '<i class="far fa-star"></i>';
                    }
                }

                feedbackItem.innerHTML = `
                    <div class="feedback-avatar">
                        ${feedback.avatar}
                    </div>
                    <div class="feedback-content">
                        <div class="feedback-header">
                            <span class="feedback-name">${feedback.name}</span>
                            <div class="feedback-rating">
                                ${starsHTML}
                            </div>
                        </div>
                        <p class="feedback-text">${feedback.comment}</p>
                        <div class="feedback-time">
                            <i class="far fa-clock me-1"></i>${feedback.time}
                        </div>
                    </div>
                `;
                feedbackList.appendChild(feedbackItem);
            });
        }

        // Create visitor map
        function createVisitorMap() {
            const map = document.getElementById('visitorMap');
            map.innerHTML = '';

            // Add some random visitor markers (for demo)
            const visitorTypes = ['adult', 'child', 'senior', 'student'];
            const visitorColors = {
                'adult': 'visitor-adult',
                'child': 'visitor-child', 
                'senior': 'visitor-senior',
                'student': 'visitor-student'
            };

            // Create 50 random visitor markers
            for (let i = 0; i < 50; i++) {
                const marker = document.createElement('div');
                const visitorType = visitorTypes[Math.floor(Math.random() * visitorTypes.length)];
                
                marker.className = `map-visitor ${visitorColors[visitorType]}`;
                marker.style.left = `${Math.random() * 90}%`;
                marker.style.top = `${Math.random() * 90}%`;
                marker.title = `${visitorType.charAt(0).toUpperCase() + visitorType.slice(1)} visitor`;
                
                map.appendChild(marker);
            }
        }

        // Initialize charts
        function initializeCharts() {
            // Demographics Chart
            const demographicsData = {
                'Adult': 0,
                'Child': 0,
                'Senior': 0,
                'Student': 0
            };

            visitorsData.forEach(visitor => {
                const type = visitor.type.charAt(0).toUpperCase() + visitor.type.slice(1);
                demographicsData[type]++;
            });

            const demographicsOptions = {
                series: Object.values(demographicsData),
                chart: {
                    type: 'pie',
                    height: 300
                },
                labels: Object.keys(demographicsData),
                colors: ['#1976d2', '#7b1fa2', '#388e3c', '#f57c00'],
                responsive: [{
                    breakpoint: 480,
                    options: {
                        chart: { width: 200 },
                        legend: { position: 'bottom' }
                    }
                }]
            };

            const demographicsChart = new ApexCharts(document.querySelector("#demographicsChart"), demographicsOptions);
            demographicsChart.render();

            // Hourly Flow Chart
            const hourlyFlowOptions = {
                series: [{
                    name: 'Visitors',
                    data: [400, 850, 1200, 1800, 2200, 3100, 2800, 2400, 2100, 1800, 1500, 1200]
                }],
                chart: {
                    height: 300,
                    type: 'area',
                    toolbar: { show: false }
                },
                colors: ['#0288d1'],
                dataLabels: { enabled: false },
                stroke: {
                    curve: 'smooth',
                    width: 3
                },
                fill: {
                    type: 'gradient',
                    gradient: {
                        shadeIntensity: 1,
                        opacityFrom: 0.7,
                        opacityTo: 0.2,
                        stops: [0, 90, 100]
                    }
                },
                xaxis: {
                    categories: ['8 AM', '9 AM', '10 AM', '11 AM', '12 PM', '1 PM', '2 PM', '3 PM', '4 PM', '5 PM', '6 PM', '7 PM']
                },
                yaxis: {
                    title: { text: 'Number of Visitors' }
                }
            };

            const hourlyFlowChart = new ApexCharts(document.querySelector("#hourlyFlowChart"), hourlyFlowOptions);
            hourlyFlowChart.render();
        }

        // Update stats
        function updateStats() {
            // Update current visitors count
            const currentVisitors = document.getElementById('currentVisitors');
            const currentCount = parseInt(currentVisitors.textContent.replace(/,/g, ''));
            const randomChange = Math.floor(Math.random() * 21) - 10; // -10 to +10
            const newCount = Math.max(0, currentCount + randomChange);
            currentVisitors.textContent = newCount.toLocaleString();
            
            // Update total visitors
            const totalVisitors = document.getElementById('totalVisitors');
            const totalCount = parseInt(totalVisitors.textContent.replace(/,/g, ''));
            totalVisitors.textContent = (totalCount + Math.abs(randomChange)).toLocaleString();
        }

        // Update visitor positions on map (for demo)
        function updateVisitorPositions() {
            const markers = document.querySelectorAll('.map-visitor');
            markers.forEach(marker => {
                const randomX = Math.random() * 90;
                const randomY = Math.random() * 90;
                marker.style.left = `${randomX}%`;
                marker.style.top = `${randomY}%`;
            });
        }

        // Filter functions
        function applyVisitorFilters() {
            const dateRange = document.getElementById('dateRange').value;
            const status = document.getElementById('visitorStatus').value;
            const type = document.getElementById('visitorType').value;
            const ticketType = document.getElementById('ticketType').value;
            
            // Show alert with filter values
            alert(`Filters applied:\nDate Range: ${dateRange}\nStatus: ${status}\nType: ${type}\nTicket Type: ${ticketType}`);
            
            // Here you would filter the visitorsData array and re-render the table
        }

        function resetVisitorFilters() {
            document.getElementById('visitorStatus').value = 'all';
            document.getElementById('visitorType').value = 'all';
            document.getElementById('ticketType').value = 'all';
            
            // Reset date range to today
            $('#dateRange').data('daterangepicker').setStartDate(moment().startOf('day'));
            $('#dateRange').data('daterangepicker').setEndDate(moment().endOf('day'));
            
            // Reset table to show all visitors
            populateVisitorsTable();
        }

        function advancedSearch() {
            alert('Opening advanced search modal...');
        }

        // Action functions
        function exportVisitorData() {
            alert('Exporting visitor data to CSV...');
        }

        function addVisitor() {
            alert('Opening add visitor form...');
        }

        function printVisitorList() {
            window.print();
        }

        function viewAllFeedback() {
            alert('Opening full feedback list...');
        }

        // Visitor details functions
        function viewVisitorDetails(visitorId) {
            const visitor = visitorsData.find(v => v.id === visitorId);
            if (!visitor) return;
            
            document.getElementById('visitorModal').style.display = 'flex';
            document.getElementById('modalTitle').textContent = `Visitor Details: ${visitor.name}`;
            
            // Create rating stars
            let starsHTML = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= visitor.rating) {
                    starsHTML += '<i class="fas fa-star text-warning"></i>';
                } else {
                    starsHTML += '<i class="far fa-star text-warning"></i>';
                }
            }
            
            const detailsHTML = `
                <div class="detail-item">
                    <div class="detail-label">Visitor ID</div>
                    <div class="detail-value">${visitor.id}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Full Name</div>
                    <div class="detail-value">${visitor.name}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Age</div>
                    <div class="detail-value">${visitor.age} years</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Gender</div>
                    <div class="detail-value">${visitor.gender}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Contact</div>
                    <div class="detail-value">${visitor.phone}<br>${visitor.email}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Nationality</div>
                    <div class="detail-value">${visitor.nationality}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Entry/Exit</div>
                    <div class="detail-value">${visitor.entryTime} / ${visitor.exitTime}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Group Size</div>
                    <div class="detail-value">${visitor.groupSize} people</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Ticket Type</div>
                    <div class="detail-value">${visitor.ticketType}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Entry Terminal</div>
                    <div class="detail-value">${visitor.terminal}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Amount Spent</div>
                    <div class="detail-value">${visitor.spent}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Rides Completed</div>
                    <div class="detail-value">${visitor.rides}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Satisfaction Rating</div>
                    <div class="detail-value">${starsHTML} (${visitor.rating}/5)</div>
                </div>
            `;
            
            document.getElementById('visitorDetails').innerHTML = detailsHTML;
        }

        function closeVisitorModal() {
            document.getElementById('visitorModal').style.display = 'none';
        }

        function editVisitor() {
            alert('Opening visitor edit form...');
        }

        function editVisitorDetails(visitorId) {
            alert(`Editing visitor: ${visitorId}`);
        }

        function deleteVisitor(visitorId) {
            if (confirm(`Are you sure you want to delete visitor ${visitorId}?`)) {
                alert(`Visitor ${visitorId} has been deleted.`);
                // In real app, remove from visitorsData and re-render table
            }
        }
    </script>
</body>
</html>